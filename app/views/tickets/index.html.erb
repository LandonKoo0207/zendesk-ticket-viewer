<h1>Zendesk Ticket Viewer</h1>

<% if @tickets.empty? %>
  There is no tickets.
<% else %>
  <table>
    <tr>
      <td witdh="150px">
        Status
      </td>
      <td width="400px">
        Subject
      </td>
      <td width="200px">
        Requested at
      </td>
    </tr>
    <% @tickets.each do |ticket| %>
      <tr>
        <td witdh="150px">
          <%= ticket.status.capitalize %>
        </td>
        <td width="400px">
          <%= link_to ticket.subject, ticket_path(ticket.id) %> 
        </td>
        <td width="200px">
          <%= ticket.created_at.in_time_zone("Melbourne").strftime('%d %b %Y, %I:%M %p') %>
        </td>
      </tr>
    <% end %>
  </table>
  <table>
    <tr>
      <td width="750px" style="text-align:center">
        <% (1..@page_count).each do |page| %>
          <%= link_to page, tickets_path(page: page), class: 'page_' + page.to_s %>
          <% if page < @page_count %>
           |
          <% end %>
        <% end %>
      </td>
    </tr>
  </table>
<% end %>
